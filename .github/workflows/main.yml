name: Build Maven Project

on:
  push:
    branches:
      - main 
jobs:
  buildbuild_and_upload:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      # - name: Build with Maven
      #   run: mvn clean install

      # - name: Run Unit test case
      #   run: mvn test

      # - name: Archive Artifacts
      #   uses: actions/upload-artifact@v2
      #   with:
      #     name: my-artifact  
      #     path: target/
      
      - name: Install and Configure JFrog CLI
        uses: jfrog/setup-jfrog-cli@v1
        with:
            jfrog-cli-version: 'latest' # You can specify a specific version if needed
        env:
            ARTIFACTORY_URL: ${{ secrets.ARTIFACTORY_URL }}
            ARTIFACTORY_USERNAME: ${{ secrets.ARTIFACTORY_USERNAME }}
            ARTIFACTORY_API_KEY: ${{ secrets.ARTIFACTORY_API_KEY }}
  
      - name: Build with Maven
        run: mvn clean install
  
      - name: Upload Artifacts to Artifactory
        run: |
            echo "Uploading artifacts to Artifactory"
            jfrog rt u "path/to/artifact.ext" "sample-project/"